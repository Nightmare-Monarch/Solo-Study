<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solo-Leveling Study Tracker</title>
<style>
  body { font-family: Arial, sans-serif; background: #1e1e2f; color: #fff; padding: 20px; }
  h1 { text-align: center; color: #f39c12; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { padding: 10px; border: 1px solid #444; text-align: center; }
  th { background: #333; }
  input { padding: 10px; width: 80%; }
  button { padding: 10px; margin-left: 10px; background: #f39c12; border: none; color: #000; font-weight: bold; cursor: pointer; }
</style>
</head>
<body>

<h1>Solo-Leveling Study Tracker</h1>

<div>
  <input type="text" id="logInput" placeholder='Enter session (e.g., "sin 2", "sin 1 pp", "sin q")'>
  <button onclick="addSession()">Add Session</button>
</div>

<table id="trackerTable">
  <thead>
    <tr>
      <th>Subject</th>
      <th>Marks</th>
      <th>Level</th>
      <th>EXP</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const subjects = {
  "sin": { name: "Sinhala", marks: 69, level: 7, exp: 0 },
  "sci": { name: "Science", marks: 68, level: 7, exp: 0 },
  "com": { name: "Commerce", marks: 80, level: 8, exp: 0 },
  "bud": { name: "Buddhism", marks: 95, level: 10, exp: 0 },
  "his": { name: "History", marks: 86, level: 9, exp: 0 },
  "dan": { name: "Dancing", marks: 73, level: 8, exp: 0 },
  "hea": { name: "Health", marks: 90, level: 9, exp: 0 },
  "mat": { name: "Maths", marks: 90, level: 9, exp: 0 },
  "eng": { name: "English", marks: 82, level: 8, exp: 0 }
};

const expPerLevel = 100;
const marksPerLevel = 5;

function addSession() {
  const input = document.getElementById("logInput").value.trim().toLowerCase();
  const parts = input.split(" ");
  if(parts.length < 2) { alert("Invalid format"); return; }

  const code = parts[0];
  const type = parts[1];

  let expGain = 0;
  if(type === "0.5") expGain = 5;
  else if(type === "1") expGain = 10;
  else if(type === "2") expGain = 20;
  else if(type === "pp") expGain = 20;
  else if(type === "q") expGain = 25;
  else if(type.includes("pp")) expGain = 20;
  else { alert("Unknown type"); return; }

  if(subjects[code]){
    subjects[code].exp += expGain;
    while(subjects[code].exp >= expPerLevel){
      subjects[code].exp -= expPerLevel;
      subjects[code].level += 1;
      subjects[code].marks += marksPerLevel;
    }
    updateTable();
  } else {
    alert("Unknown subject code");
  }

  document.getElementById("logInput").value = "";
}

function updateTable(){
  const tbody = document.querySelector("#trackerTable tbody");
  tbody.innerHTML = "";
  for(let key in subjects){
    const s = subjects[key];
    const row = `<tr>
      <td>${s.name}</td>
      <td>${s.marks}</td>
      <td>${s.level}</td>
      <td>${s.exp}</td>
    </tr>`;
    tbody.innerHTML += row;
  }
}

updateTable();
</script>

</body>
</html>
